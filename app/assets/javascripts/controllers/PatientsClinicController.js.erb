app.controller('PatientsClinicController',
        ['$scope', '$location', '$state', '$stateParams', '$http', 'AuthInterceptor', 'uiGmapGoogleMapApi', 'SplitArrayService',
          function($scope, $location, $state, $stateParams, $http, AuthInterceptor, uiGmapGoogleMapApi, SplitArrayService) {
  $scope.clinic = {};
  $scope.doctors = [];
  $scope.docRows = [];
  $scope.map = {};
  var clinicReq = {
    method: 'GET',
    url: '/patients/' + $stateParams.patientId + '/clinics/' + $stateParams.clinicId + '.json',
    headers: $http.defaults.headers.common
  };
  clinicReq = AuthInterceptor.request(clinicReq);
  $http(clinicReq)
    .success(function(data) {
      console.log(data);
      $scope.clinic = data.clinic;
      $scope.doctors = data.doctors;
      $scope.docRows = SplitArrayService.SplitArray($scope.doctors, 4);
      $scope.map = {
        center: {
          latitude: $scope.clinic.latitude,
          longitude: $scope.clinic.longitude},
        markers: [{
          latitude: $scope.clinic.latitude,
          longitude: $scope.clinic.longitude
        }],
        zoom: 14 };
      uiGmapGoogleMapApi.then(function(maps) {

      });
    })
    .error(function(err) {
      console.log(err);
    });

  $scope.loadDoctor = function(doctor) {
    $state.go('user.doctor', {doctorId: doctor.id, patientId: $stateParams.patientId});
  };

}]);
