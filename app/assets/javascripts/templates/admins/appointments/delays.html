<div class="container">
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <flare-messages></flare-messages>
    </div>
  </div>
  <div class="row" ng-repeat="doctor in doctors">
    <div class="col-md-8 col-md-offset-2">
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading"><h4>{{doctor.full_name}}</h4></div>
            <div class="panel-body panel-inverse">
              <table class='table table-striped table-bordered table-hover table-inverse'>
                <thread>
                  <tr>
                    <th>#</th>
                    <th>Original Time</th>
                    <th>Scheduled Time</th>
                    <th>Patient</th>
                    <th>Delay by (minutes)</th>
                    <th>Apply to all remaining</th>
                    <th>Confirm</th>
                  </tr>
                  <tbody>
                  <tr ng-repeat="appt in doctor.appointments track by appt.id">
                    <td><a ui-sref="admin.appointment({adminId: {{admin.id}}, appointmentId: {{appt.id}}})">{{$index}}</a></td>
                    <td>{{appt.date_time_ampm}}</td>
                    <td>{{appt.delayed_date_time_ampm}}</td>
                    <td>{{appt.patient_full_name}}</td>
                    <!--<%= form_tag(url: add_delay_path, method: :post, html: { role: 'form' }) do %>-->
                    <!--<%= hidden_field_tag(:doctor_id, doctor.id) %>-->
                    <!--<%= hidden_field_tag(:appointment_id, appointment.id) %>-->
                    <td>
                      <div class='form-group' >
                       <select  ng-model="appt.delay.minutes" class="form-control">
                         <option value="5">5</option>
                         <option value="10">10</option>
                         <option value="15">15</option>
                         <option value="20">20</option>
                         <option value="30">30</option>
                         <option value="45">45</option>
                         <option value="60">60</option>
                       </select>
                      </div>
                    </td>
                    <td>
                      <div class='form-group'>
                        <label>Apply to all</label>
                        <input type="checkbox" ng-model="appt.delay.apply_all" class="form-control">
                      </div>
                    </td>
                    <td>
                      <button ng-click="addDelay(appt)" class="btn btn-sm btn-primary">Update</button>
                    </td>
                  </tr>
                  </tbody>
                </thread>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

